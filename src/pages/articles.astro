---
import { getCollection } from 'astro:content';
import SpotlightLayout from '../layouts/SpotlightLayout.astro';

const posts = await getCollection('posts', ({ data }) => !data.draft && data.type !== 'photography');
const sorted = posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<SpotlightLayout title="文章 | Joey's Notes" description="技术文章与实践复盘" lang="zh">
  <section class="section-gap">
    <div class="shell">
      <div class="hero-intro">
        <p class="eyebrow">Articles</p>
        <h1 class="mt-4 text-4xl font-semibold">技术文章</h1>
        <p class="mt-4 muted">按时间排序，保持信息结构稳定，减少装饰性干扰。</p>
      </div>

      <div class="entry-stream mt-10">
        {sorted.map((post) => (
          <article class="entry-item">
            <time class="entry-meta" datetime={post.data.date.toISOString()}>
              {post.data.date.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' })}
            </time>
            <h2 class="entry-title">
              <a href={`/posts/${post.slug}/`}>{post.data.title}</a>
            </h2>
            <p class="entry-desc">{post.data.description || post.data.subtitle || '点击查看完整内容。'}</p>
          </article>
        ))}
      </div>
    </div>
  </section>
</SpotlightLayout>
