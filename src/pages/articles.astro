---
import { getCollection } from 'astro:content';
import SpotlightLayout from '../layouts/SpotlightLayout.astro';

const posts = await getCollection('posts', ({ data }) => !data.draft && data.type !== 'photography');
const sorted = posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<SpotlightLayout title="文章 | Joey's Notes" description="技术文章与实践复盘" lang="zh">
  <section class="section-gap">
    <div class="shell">
      <div class="mx-auto max-w-3xl text-center">
        <p class="eyebrow">Articles</p>
        <h1 class="mt-4 text-4xl font-semibold" style="font-family: var(--font-serif);">技术文章</h1>
        <p class="mt-4 muted">按时间排序，保持信息结构稳定，减少装饰性干扰。</p>
      </div>

      <div class="article-list mx-auto mt-10 max-w-3xl space-y-10">
        {sorted.map((post) => (
          <article class="border-b pb-8" style="border-color: var(--line);">
            <time class="text-xs muted" datetime={post.data.date.toISOString()}>
              {post.data.date.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' })}
            </time>
            <h2 class="mt-2 text-2xl font-semibold" style="font-family: var(--font-serif);">
              <a href={`/posts/${post.slug}/`}>{post.data.title}</a>
            </h2>
            <p class="mt-3 muted">{post.data.description || post.data.subtitle || '点击查看完整内容。'}</p>
          </article>
        ))}
      </div>
    </div>
  </section>
</SpotlightLayout>
